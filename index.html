<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CLO3D Pro AI โ Kianoush</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- ููู ูุฑูุฏ ุจุง PIN -->
  <div id="lockOverlay" class="lock">
    <div class="lock-card">
      <h2>ูุฑูุฏ ุจุง PIN</h2>
      <p class="muted small">ุจุฑุง ุงูููโุจุงุฑ ุจุง ุงู PIN ููู ูโุดูุฏ. ุจุนุฏุงู ุงุฒ ุชูุธูุงุช ุชุบุฑ ุจุฏู.</p>
      <input id="pinInput" class="input big" inputmode="numeric" maxlength="6" placeholder="ูุซูุงู 4068">
      <div class="row">
        <button id="unlockBtn" class="btn">ูุฑูุฏ</button>
        <button id="resetVaultBtn" class="ghost" title="ูพุงฺฉ ฺฉุฑุฏู ูููู ุฏุงุฏูโูุง">ูพุงฺฉโุณุงุฒ ฺฉุงูู</button>
      </div>
      <div id="lockMsg" class="small muted"></div>
    </div>
  </div>

  <div class="app" id="app" hidden>
    <header class="topbar">
      <div class="brand">
        <h1>CLO3D Pro AI</h1>
        <div class="sub">ุชู ุฎูุฏฺฉุงุฑ ยท ุฑูุฒฺฏุฐุงุฑ ูุญู ยท ุขููุงู ยท ููุด ฺฉูฺฉ</div>
      </div>
      <div class="actions">
        <button id="quickPom" class="btn mini" title="ุดุฑูุน ูพูููุฏูุฑู">โณ</button>
        <button id="quickAdd" class="btn mini" title="ุงูุฒูุฏู ฺฉุงุฑ/ุฌูุณู">๏ผ</button>
        <button id="themeToggle" class="ghost">๐ ุชู</button>
        <button id="exportCsvBtn" class="btn">CSV</button>
        <button id="backupBtn" class="ghost">ูพุดุชุจุงู JSON (ุฑูุฒ)</button>
        <button id="importBtn" class="ghost">ูุงุฑุฏ ฺฉุฑุฏู</button>
        <input type="file" id="importFile" accept=".json" style="display:none" />
      </div>
    </header>

    <main class="main">
      <aside class="sidebar">
        <div class="card">
          <label>ุงูุฑูุฒ: <strong id="todayLabel"></strong></label>
          <label>ุงูุชุฎุงุจ ุชุงุฑุฎ</label>
          <input type="date" id="selectedDate" class="input" />
          <div class="small muted">ุชุงุฑุฎ ุฑุง ูโุชูุงู ุฏุณุช ุชุบุฑ ุฏู</div>
        </div>

        <div class="card">
          <strong>ุณู ูุฏู ุงุตู</strong>
          <div id="mainTasks" class="tasks"></div>
          <div class="addRow">
            <input id="customTitle" class="input" placeholder="ุนููุงู ฺฉุงุฑ ุฏูุฎูุงู" />
            <input id="customStart" type="time" class="input" />
            <button id="addCustomBtn" class="btn">ุงูุฒูุฏู</button>
          </div>
        </div>

        <div class="card">
          <strong>ูุงูุจโูุง ุฑูุฒ</strong>
          <div class="row wrap">
            <select id="templateSelect" class="input">
              <option value="learn">ุฑูุฒ ุงุฏฺฏุฑ (ุฌูุณู ุฌุฏุฏ)</option>
              <option value="produce">ุฑูุฒ ุชููุฏ (ุจุฏูู ูุฏุฆู)</option>
              <option value="review">ุฑูุฒ ูุฑูุฑ/ุฑูุน ุงุดฺฉุงู</option>
            </select>
            <input id="templateSession" class="input smallInput" placeholder="ุดูุงุฑู ุฌูุณู">
            <button id="applyTemplate" class="btn">ูพุฑ ฺฉุฑุฏู</button>
          </div>
        </div>

        <div class="card">
          <strong>ูพูููุฏูุฑู</strong>
          <div class="pomRow">
            <label>ฺฉุงุฑ</label><input id="pomWork" type="number" value="25" min="5" class="input smallInput">
            <label>ุงุณุชุฑุงุญุช</label><input id="pomShort" type="number" value="5" min="1" class="input smallInput">
            <label>ุจููุฏ</label><input id="pomLong" type="number" value="15" min="5" class="input smallInput">
          </div>
          <div class="pomControls">
            <div id="pomTimer" class="timerCircle">25:00</div>
            <div class="pomButtons">
              <button id="pomStart" class="btn">ุดุฑูุน</button>
              <button id="pomPause" class="ghost">ูููู</button>
              <button id="pomReset" class="ghost">ุฑุณุช</button>
            </div>
            <div class="small muted">ุญุงูุช: <span id="pomState">ฺฉุงุฑ</span> ยท ฺุฑุฎูโูุง: <span id="pomCycles">0</span> ยท ููู ุชูุฑฺฉุฒ: <span id="focusState">ุฎุงููุด</span></div>
          </div>
        </div>

        <div class="card">
          <strong>ุงุฏุฏุงุดุช ุฑูุฒุงูู</strong>
          <textarea id="dayNote" rows="6" class="input" placeholder="ุงุฏูโูุงุ ูฺฉุงุช ุขููุฒุด..."></textarea>
          <div class="row">
            <button id="saveNoteBtn" class="btn">ุฐุฎุฑู</button>
            <button id="searchNotesBtn" class="ghost">ุฌุณุชุฌู</button>
          </div>
        </div>

        <div class="card">
          <strong>ุชูุธูุงุช ุงููุช</strong>
          <div class="row">
            <input id="newPin" class="input" placeholder="PIN ุฌุฏุฏ (ด ุชุง ถ ุฑูู)">
            <button id="changePinBtn" class="ghost">ุชุบุฑ PIN</button>
          </div>
          <div class="small muted">AES-GCM ยท PBKDF2=300k ยท ููู ต ุชูุงุด + ุชุงุฎุฑ ุงูุฒุงุด</div>
        </div>
      </aside>

      <section class="content">
        <div class="card wide">
          <div class="flexBetween">
            <h2 id="dayTitle">ุจุฑูุงูู ุฑูุฒ</h2>
            <div class="small muted">ุขููุงู + ุงุนูุงูโูุง + ุฑูุฒฺฏุฐุงุฑ</div>
          </div>

          <div id="taskList" class="taskList"></div>

          <div class="controlsRow">
            <input id="manualTime" type="time" class="input smallInput" />
            <input id="manualText" class="input" placeholder="ูุงฺฏ ุฏุณุช (ูุซูุงู: 21:10 โ ุฏุฏู ุฌูุณู 3)" />
            <button id="addManualLog" class="btn">ุซุจุช ูุงฺฏ</button>
          </div>
        </div>

        <div class="card">
          <h3>ุขูุงุฑ ท ุฑูุฒ</h3>
          <canvas id="progressChart" height="120"></canvas>
          <div class="small muted" id="statsSummary"></div>
        </div>

        <div class="card">
          <h3>ุงุณุชุฑฺฉ ู ูุฏู ููุชฺฏ</h3>
          <div class="row">ุงุณุชุฑฺฉ: <strong id="streakDays">0</strong> ุฑูุฒ ๐ฅ</div>
          <div class="row">ูุฏู ููุชู: <span id="weeklyGoalText">0/5</span></div>
          <div class="row">
            <button id="recalcStats" class="ghost">ุจูโุฑูุฒุฑุณุงู</button>
            <button id="enableNoti" class="btn">ูุนุงูโุณุงุฒ ุงุนูุงู</button>
          </div>
        </div>

        <div class="card">
          <h3>ูุฑูุฑ ูุงุตููโููุฏ (Ebbinghaus)</h3>
          <div id="reviewList" class="small"></div>
        </div>

        <div class="card">
          <h3>ูพุบุงู ุนูู ุงูุฑูุฒ</h3>
          <div id="scienceMsg" class="science"></div>
        </div>

        <div class="card">
          <h3>ููุด ุฑุดุฏ (Agent)</h3>
          <div id="agentBox" class="small">ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑโฆ</div>
        </div>

        <div class="card">
          <h3>ุชุงุฑุฎฺู ุฑูุฒ</h3>
          <ul id="history" class="historyList"></ul>
        </div>
      </section>
    </main>

    <footer class="footer">ุณุงุฎุชูโุดุฏู ุจุฑุง ฺฉุงููุด โ ูุณุฎู Pro AI</footer>
  </div>

  <script src="app.js"></script>
</body>
</html>
